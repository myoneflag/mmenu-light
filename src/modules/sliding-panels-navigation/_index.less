@import '_variables';
@import '_additional-variables';

.mmspn-reset {
    display: block;
    padding: 0;
    margin: 0;
    box-sizing: border-box;
}

//  The menu
.mm-spn {
    .mmspn-reset;

    width: 100%;
    height: 100%;

    //  Prevent the entire menu from highlighting when clicking the navbar
    -webkit-tap-highlight-color: transparent;

    //  Enables smooth scrolling.
    -webkit-overflow-scrolling: touch;

    //  Prevent any content being visible outside the menu
    overflow: hidden;
    clip-path: inset(0 0 0 0);

    //  This creates a new viewport from the menu so the panels can be fixed
    transform: translateX(0px);

    color: @theme-darkest-gray;
    background: @theme-white;
}

//Menu header
.mm-header {
    height: @mmspn_header_height;
    margin-bottom: @mmspn_searchbox_margin-bottom;
    background: @theme-brand-color;
    color: @theme-white;

    &__wrapper {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        height: 100%;
    }

    &__title {
        margin: 0;
        font-size: 14px;
        //  Ellipsis.
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;

        @media (min-width: (@breakpoint-l)) {
            font-size: 16px;
        }
    }

    .mm-btn {
        height: 100%;
        display: flex;
        align-items: center;
    }
}

//Menu searchbox
.mm-searchbox {
    height: @mmspn_searchbox_height;
    margin-bottom: @mmspn_header_margin-bottom - 12px;
    text-align: center;

    &__input {
        padding: 12px 50px;
        border-radius: 32px;
        background-color: #F2F2F2;
    }
}

.results__header {
    padding-left: 24px;

    p {
        font-size: 12px;
        font-weight: bold;
        color: @theme-darkest-gray;
    }
}

//  Listviews
.mm-spn {
    //  All listviews.
    .mm-panel {
        .mmspn-reset;

        //  Enables smooth scrolling.
        -webkit-overflow-scrolling: touch;

        position: fixed;
        top: 0;
        left: 100%;
        bottom: 0;
        z-index: 2; // Needs a z-index to be above its parent.

        //  Fix for weird iOS Safari issue:
        //  A fixed element is not visible outside of its parent if its parent is scrollable.
        width: 100% + @mmspn_panel_offset;
        padding-right: @mmspn_panel_offset;
        //  /Fix

        line-height: @mmspn_line_height;

        overflow: visible;
        overflow-y: auto;
        background: inherit;
        transition: left @mmspn_transition_duration ease 0s;

        cursor: default;
    }

    //Reset for list
    ul {
        .mmspn-reset;
        background: inherit;
    }

    //  First level listview.
    > .mm-panel {
        left: 0;
    }

    //  Listview opened.
    .mm-panel.mm-spn--open {
        left: 0;
    }

    //  Child listview opened.
    .mm-panel.mm-spn--parent {
        left: -@mmspn_panel_offset;
        overflow-y: hidden;
    }
}

//  Listitems
.mm-spn {
    .mm-listitem,
    li {
        .mmspn-reset;

        position: relative;
        background: inherit;
        cursor: pointer;
    }

    .mm-listitem {
        //  The arrow.
        &:before {
            content: '';
            display: block;
            position: absolute;
            top: @mmspn_item_height / 2;
            right: @mmspn_item_indent;
            z-index: 0;

            width: @mmspn_arrow_size;
            height: @mmspn_arrow_size;
            border-top: @mmspn_arrow_weight solid;
            border-right: @mmspn_arrow_weight solid;
            transform: rotate(45deg) translate(0, -50%);
            opacity: @mmspn_arrow_opac;
        }
    }
}

//  Anchors
.mm-panel {
    a,
    span {
        .mmspn-reset;

        position: relative;
        z-index: 1;
        padding: ((@mmspn_item_height - @mmspn_line_height) / 2) @mmspn_item_indent;
        padding-left: @mmspn_item_indent_left;
    }

    a {
        background: inherit;
        color: inherit;
        text-decoration: none;

        //  Show arrow for opening the submenu.
        &:not(:last-child) {
            width: calc(100% - @mmspn_item_height);

            //  Border on the right.
            &:after {
                content: '';
                display: block;
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                border-right: 1px solid;
                opacity: @mmspn_border_opac;
            }
        }
    }

    //  Show arrow for opening the submenu.
    span {
        background: transparent;
    }
}

//Listitem wrapper
.mm-wrapper {
    display: flex;

    &__inside {
        &--left {
            margin-left: -35px;
        }

        &--right {
            display: flex;
            flex-wrap: wrap;
            width: 100%;
        }
    }

    &__text {
        font-size: 14px;
        
        p {
            margin-bottom: 4px;
        }
    }

    &__heading {
        color: @theme-darkest-gray;

        @media (min-width: (@breakpoint-l)) {
            font-size: 16px;
        }
    }

    &__subtext {
        line-height: 20px;
        color: @theme-darker-gray
    }

    &__text + &__button {
        padding-top: 20px;
    }

    &__icon {
        padding-right: 15px;
        width: 20px;
        text-align: right;
    }

    &__arrow {
        margin-left: auto;
    }

    &__button,
    button {
        width: 100%;
    }
}

//Listitem wrapper phone
.mm-wrapper--phone {
    .mm-wrapper__heading {
        font-size: 16px;
        font-weight: bold;
    }

    .mm-wrapper__heading,
    .mm-wrapper__icon {
        color: @theme-brand-color;
    }
}

//Menu box
.mm-box {
    &:before {
        content: '';
        display: block;
        top: inherit;
        z-index: 2;
        width: 100%;
        border-top: 1px solid @theme-light-gray;
    }
}

//Padding between sections
.mm-box,
.mm-box:before,
.mm-panel > .mm-listview {
    padding-bottom: 21px; // 12px from ul + 21px = 33px

    @media (min-width: (@breakpoint-l)) {
        padding-bottom: 36px; // 12px from ul + 36px = 48px
    }
}

@import '_navbar';
@import '_vertical';
